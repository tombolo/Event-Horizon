"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[575],{8575:function(e,s,t){var r=t(5893),a=t(1163),l=t(7294),i=t(3692),n=t(9681),c=t(3114),o=t(3299),d=t(5675),m=t.n(d);s.Z=e=>{var s,t,d,x,h,u,p;let{cart:g=[]}=e,[f,j]=(0,l.useState)(!1),v=(0,a.useRouter)(),{data:y,status:b}=(0,o.useSession)(),[w,N]=(0,l.useState)(!1),[k,C]=(0,l.useState)(null),[E,H]=(0,l.useState)(!1),S=g.reduce((e,s)=>e+(s.quantity||1),0);(0,l.useEffect)(()=>{let fetchBalance=async()=>{var e;if(null==y?void 0:null===(e=y.user)||void 0===e?void 0:e.email){H(!0);try{let e=await fetch("/api/user/balance"),s=await e.json();e.ok?C(s.balance):console.error("Failed to fetch balance:",s.error)}catch(e){console.error("Error fetching balance:",e)}finally{H(!1)}}else C(null)};fetchBalance()},[y]);let handleAuthClick=async()=>{N(!0);try{y?await (0,o.signOut)({callbackUrl:"/"}):await (0,o.signIn)("credentials",{callbackUrl:"/"})}finally{N(!1)}},formatBalance=e=>null===e?"--":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e);return(0,r.jsxs)("header",{className:"fixed w-full bg-white/90 backdrop-blur-md shadow-sm z-50 border-b border-gray-100",children:[(0,r.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16 md:h-20",children:[(0,r.jsx)(n.E.div,{onClick:()=>v.push("/"),initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex-shrink-0 flex items-center cursor-pointer",children:(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(n.E.div,{whileHover:{rotate:15},className:"w-10 h-10 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center text-white font-bold shadow-md",children:(0,r.jsx)("span",{className:"text-lg",children:"EH"})}),(0,r.jsx)("span",{className:"text-xl md:text-2xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"EventHorizon"})]})}),(0,r.jsxs)("nav",{className:"hidden md:flex items-center space-x-8",children:[(0,r.jsxs)(n.E.a,{whileHover:{y:-2},href:"#",className:"font-medium text-gray-700 hover:text-purple-600 transition flex items-center group",children:["Concerts",(0,r.jsx)("span",{className:"ml-1 text-purple-500 opacity-0 group-hover:opacity-100 transition",children:"→"})]}),(0,r.jsxs)(n.E.a,{whileHover:{y:-2},href:"#",className:"font-medium text-gray-700 hover:text-purple-600 transition flex items-center group",children:["Sports",(0,r.jsx)("span",{className:"ml-1 text-purple-500 opacity-0 group-hover:opacity-100 transition",children:"→"})]}),(0,r.jsxs)(n.E.a,{whileHover:{y:-2},href:"#",className:"font-medium text-gray-700 hover:text-purple-600 transition flex items-center group",children:["Festivals",(0,r.jsx)("span",{className:"ml-1 text-purple-500 opacity-0 group-hover:opacity-100 transition",children:"→"})]}),(0,r.jsxs)(n.E.a,{whileHover:{y:-2},href:"#",className:"font-medium text-gray-700 hover:text-purple-600 transition flex items-center group",children:["Theater",(0,r.jsx)("span",{className:"ml-1 text-purple-500 opacity-0 group-hover:opacity-100 transition",children:"→"})]})]}),(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,r.jsx)(n.E.button,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"p-2 rounded-full hover:bg-gray-100 transition",children:(0,r.jsx)(i.jRj,{className:"h-5 w-5 text-gray-600"})}),(0,r.jsxs)(n.E.button,{onClick:()=>v.push("/cart"),whileHover:{scale:1.1},whileTap:{scale:.95},className:"p-2 rounded-full hover:bg-gray-100 transition relative",children:[(0,r.jsx)(i.Qyq,{className:"h-5 w-5 text-gray-600"}),S>0&&(0,r.jsx)("span",{className:"absolute -top-1 -right-1 bg-orange-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center shadow-sm",children:S})]}),"loading"===b?(0,r.jsx)("div",{className:"animate-pulse h-10 w-24 rounded bg-gray-200"}):y?(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)(n.E.div,{whileHover:{scale:1.02},className:"flex items-center bg-gradient-to-r from-green-50 to-green-100 px-3 py-1.5 rounded-lg border border-green-200",children:[(0,r.jsx)(i.oQC,{className:"text-green-600 mr-1.5"}),(0,r.jsx)("span",{className:"text-sm font-medium text-green-800",children:E?(0,r.jsx)("span",{className:"inline-block h-3 w-12 bg-green-200 rounded animate-pulse"}):formatBalance(k)})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(null===(s=y.user)||void 0===s?void 0:s.image)?(0,r.jsx)(m(),{src:y.user.image,alt:"User profile",width:32,height:32,className:"rounded-full mr-2"}):(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 mr-2",children:(0,r.jsx)(i.fzv,{className:"h-4 w-4"})}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700 truncate max-w-[120px]",children:(null===(t=y.user)||void 0===t?void 0:t.name)||(null===(x=y.user)||void 0===x?void 0:null===(d=x.email)||void 0===d?void 0:d.split("@")[0])})]}),(0,r.jsx)(n.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:handleAuthClick,disabled:w,className:"text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1 rounded-lg transition flex items-center",children:w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-gray-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing out..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.xqh,{className:"mr-1"}),"Sign Out"]})})]})]}):(0,r.jsx)(n.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:handleAuthClick,disabled:w,className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-4 py-2 rounded-lg transition shadow-md flex items-center",children:w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.fzv,{className:"mr-2"}),"Sign In"]})})]}),(0,r.jsxs)("div",{className:"md:hidden flex items-center space-x-4",children:[(0,r.jsxs)("button",{onClick:()=>v.push("/cart"),className:"p-2 rounded-full hover:bg-gray-100 transition relative",children:[(0,r.jsx)(i.Qyq,{className:"h-5 w-5 text-gray-600"}),S>0&&(0,r.jsx)("span",{className:"absolute -top-1 -right-1 bg-orange-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center shadow-sm",children:S})]}),(0,r.jsx)("button",{onClick:()=>{j(!f)},className:"p-2 rounded-md text-gray-700 hover:text-purple-600 focus:outline-none",children:f?(0,r.jsx)(i.q5L,{className:"h-6 w-6"}):(0,r.jsx)(i.cur,{className:"h-6 w-6"})})]})]})}),(0,r.jsx)(c.M,{children:f&&(0,r.jsx)(n.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"md:hidden bg-white shadow-lg overflow-hidden",children:(0,r.jsxs)("div",{className:"px-4 pt-2 pb-4 space-y-2",children:[(0,r.jsx)(n.E.a,{whileHover:{x:5},href:"#",className:"block px-3 py-3 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100 border-b border-gray-100",children:"Concerts"}),(0,r.jsx)(n.E.a,{whileHover:{x:5},href:"#",className:"block px-3 py-3 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100 border-b border-gray-100",children:"Sports"}),(0,r.jsx)(n.E.a,{whileHover:{x:5},href:"#",className:"block px-3 py-3 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100 border-b border-gray-100",children:"Festivals"}),(0,r.jsx)(n.E.a,{whileHover:{x:5},href:"#",className:"block px-3 py-3 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100 border-b border-gray-100",children:"Theater"}),(0,r.jsx)("div",{className:"pt-4 border-t border-gray-200",children:"authenticated"===b?(0,r.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center px-3 py-2",children:[(null===(h=y.user)||void 0===h?void 0:h.image)?(0,r.jsx)(m(),{src:y.user.image,alt:"User profile",width:40,height:40,className:"rounded-full mr-3"}):(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 mr-3",children:(0,r.jsx)(i.fzv,{className:"h-5 w-5"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"font-medium text-gray-900",children:null===(u=y.user)||void 0===u?void 0:u.name}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:null===(p=y.user)||void 0===p?void 0:p.email})]})]}),(0,r.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 bg-green-50 rounded-lg mx-2",children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(i.oQC,{className:"text-green-600 mr-2"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Balance"})]}),(0,r.jsx)("span",{className:"text-sm font-bold text-green-700",children:E?(0,r.jsx)("span",{className:"inline-block h-3 w-16 bg-green-200 rounded animate-pulse"}):formatBalance(k)})]}),(0,r.jsx)("button",{onClick:handleAuthClick,disabled:w,className:"w-full flex items-center justify-center px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg",children:w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing out..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.xqh,{className:"mr-2"}),"Sign Out"]})})]}):(0,r.jsx)("button",{onClick:handleAuthClick,disabled:w,className:"w-full flex items-center justify-center px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-medium rounded-lg shadow-md",children:w?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,r.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,r.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.fzv,{className:"mr-2"}),"Sign In"]})})})]})})})]})}}}]);
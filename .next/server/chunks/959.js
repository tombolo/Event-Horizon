exports.id=959,exports.ids=[959],exports.modules={8575:(e,s,t)=>{"use strict";t.a(e,async(e,r)=>{try{t.d(s,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var a=t(997),l=t(1163),i=t(6689),n=t(3692),c=t(6197),o=t(1649),d=t(5675),m=t.n(d),x=e([c]);c=(x.then?(await x)():x)[0];let __WEBPACK_DEFAULT_EXPORT__=({cart:e=[]})=>{let[s,t]=(0,i.useState)(!1),r=(0,l.useRouter)(),{data:d,status:x}=(0,o.useSession)(),[h,p]=(0,i.useState)(!1),[u,g]=(0,i.useState)(null),[f,j]=(0,i.useState)(!1),y=e.reduce((e,s)=>e+(s.quantity||1),0);(0,i.useEffect)(()=>{let fetchBalance=async()=>{if(d?.user?.email){j(!0);try{let e=await fetch("/api/user/balance"),s=await e.json();e.ok?g(s.balance):console.error("Failed to fetch balance:",s.error)}catch(e){console.error("Error fetching balance:",e)}finally{j(!1)}}else g(null)};fetchBalance()},[d]);let handleAuthClick=async()=>{p(!0);try{d?await (0,o.signOut)({callbackUrl:"/"}):await (0,o.signIn)("credentials",{callbackUrl:"/"})}finally{p(!1)}},formatBalance=e=>null===e?"--":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(e);return(0,a.jsxs)("header",{className:"fixed w-full bg-white/90 backdrop-blur-md shadow-sm z-50 border-b border-gray-100",children:[a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center h-16 md:h-20",children:[a.jsx(c.motion.div,{onClick:()=>r.push("/"),initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"flex-shrink-0 flex items-center cursor-pointer",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx(c.motion.div,{whileHover:{rotate:15},className:"w-10 h-10 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center text-white font-bold shadow-md",children:a.jsx("span",{className:"text-lg",children:"EH"})}),a.jsx("span",{className:"text-xl md:text-2xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"EventHorizon"})]})}),(0,a.jsxs)("nav",{className:"hidden md:flex items-center space-x-8",children:[(0,a.jsxs)(c.motion.div,{whileHover:{y:-2},onClick:()=>r.push("/concerts"),className:"font-medium text-gray-700 hover:text-purple-600 transition flex items-center group cursor-pointer",children:["Concerts",a.jsx("span",{className:"ml-1 text-purple-500 opacity-0 group-hover:opacity-100 transition",children:"→"})]}),(0,a.jsxs)(c.motion.div,{whileHover:{y:-2},onClick:()=>r.push("/sports"),className:"font-medium text-gray-700 hover:text-purple-600 transition flex items-center group cursor-pointer",children:["Sports",a.jsx("span",{className:"ml-1 text-purple-500 opacity-0 group-hover:opacity-100 transition",children:"→"})]}),(0,a.jsxs)(c.motion.div,{whileHover:{y:-2},onClick:()=>r.push("/festivals"),className:"font-medium text-gray-700 hover:text-purple-600 transition flex items-center group cursor-pointer",children:["Festivals",a.jsx("span",{className:"ml-1 text-purple-500 opacity-0 group-hover:opacity-100 transition",children:"→"})]}),(0,a.jsxs)(c.motion.div,{whileHover:{y:-2},onClick:()=>r.push("/theater"),className:"font-medium text-gray-700 hover:text-purple-600 transition flex items-center group cursor-pointer",children:["Theater",a.jsx("span",{className:"ml-1 text-purple-500 opacity-0 group-hover:opacity-100 transition",children:"→"})]})]}),(0,a.jsxs)("div",{className:"hidden md:flex items-center space-x-4",children:[(0,a.jsxs)(c.motion.button,{onClick:()=>r.push("/cart"),whileHover:{scale:1.1},whileTap:{scale:.95},className:"p-2 rounded-full hover:bg-gray-100 transition relative",children:[a.jsx(n.Qyq,{className:"h-5 w-5 text-gray-600"}),y>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-orange-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center shadow-sm",children:y})]}),"loading"===x?a.jsx("div",{className:"animate-pulse h-10 w-24 rounded bg-gray-200"}):d?(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(c.motion.div,{whileHover:{scale:1.02},className:"flex items-center bg-gradient-to-r from-green-50 to-green-100 px-3 py-1.5 rounded-lg border border-green-200",children:[a.jsx(n.oQC,{className:"text-green-600 mr-1.5"}),a.jsx("span",{className:"text-sm font-medium text-green-800",children:f?a.jsx("span",{className:"inline-block h-3 w-12 bg-green-200 rounded animate-pulse"}):formatBalance(u)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[d.user?.image?a.jsx(m(),{src:d.user.image,alt:"User profile",width:32,height:32,className:"rounded-full mr-2"}):a.jsx("div",{className:"w-8 h-8 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 mr-2",children:a.jsx(n.fzv,{className:"h-4 w-4"})}),a.jsx("span",{className:"text-sm font-medium text-gray-700 truncate max-w-[120px]",children:d.user?.name||d.user?.email?.split("@")[0]})]}),a.jsx(c.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:handleAuthClick,disabled:h,className:"text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-1 rounded-lg transition flex items-center",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-gray-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing out..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(n.xqh,{className:"mr-1"}),"Sign Out"]})})]})]}):a.jsx(c.motion.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:handleAuthClick,disabled:h,className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white px-4 py-2 rounded-lg transition shadow-md flex items-center",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(n.fzv,{className:"mr-2"}),"Sign In"]})})]}),(0,a.jsxs)("div",{className:"md:hidden flex items-center space-x-4",children:[(0,a.jsxs)("button",{onClick:()=>r.push("/cart"),className:"p-2 rounded-full hover:bg-gray-100 transition relative",children:[a.jsx(n.Qyq,{className:"h-5 w-5 text-gray-600"}),y>0&&a.jsx("span",{className:"absolute -top-1 -right-1 bg-orange-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center shadow-sm",children:y})]}),a.jsx("button",{onClick:()=>{t(!s)},className:"p-2 rounded-md text-gray-700 hover:text-purple-600 focus:outline-none",children:s?a.jsx(n.q5L,{className:"h-6 w-6"}):a.jsx(n.cur,{className:"h-6 w-6"})})]})]})}),a.jsx(c.AnimatePresence,{children:s&&a.jsx(c.motion.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"md:hidden bg-white shadow-lg overflow-hidden",children:(0,a.jsxs)("div",{className:"px-4 pt-2 pb-4 space-y-2",children:[a.jsx(c.motion.div,{whileHover:{x:5},onClick:()=>{r.push("/concerts"),t(!1)},className:"block px-3 py-3 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100 border-b border-gray-100 cursor-pointer",children:"Concerts"}),a.jsx(c.motion.div,{whileHover:{x:5},onClick:()=>{r.push("/sports"),t(!1)},className:"block px-3 py-3 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100 border-b border-gray-100 cursor-pointer",children:"Sports"}),a.jsx(c.motion.div,{whileHover:{x:5},onClick:()=>{r.push("/festivals"),t(!1)},className:"block px-3 py-3 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100 border-b border-gray-100 cursor-pointer",children:"Festivals"}),a.jsx(c.motion.div,{whileHover:{x:5},onClick:()=>{r.push("/theater"),t(!1)},className:"block px-3 py-3 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100 border-b border-gray-100 cursor-pointer",children:"Theater"}),a.jsx("div",{className:"pt-4 border-t border-gray-200",children:"authenticated"===x?(0,a.jsxs)("div",{className:"flex flex-col space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center px-3 py-2",children:[d.user?.image?a.jsx(m(),{src:d.user.image,alt:"User profile",width:40,height:40,className:"rounded-full mr-3"}):a.jsx("div",{className:"w-10 h-10 rounded-full bg-purple-100 flex items-center justify-center text-purple-600 mr-3",children:a.jsx(n.fzv,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:d.user?.name}),a.jsx("p",{className:"text-sm text-gray-500",children:d.user?.email})]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between px-3 py-2 bg-green-50 rounded-lg mx-2",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(n.oQC,{className:"text-green-600 mr-2"}),a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Balance"})]}),a.jsx("span",{className:"text-sm font-bold text-green-700",children:f?a.jsx("span",{className:"inline-block h-3 w-16 bg-green-200 rounded animate-pulse"}):formatBalance(u)})]}),a.jsx("button",{onClick:handleAuthClick,disabled:h,className:"w-full flex items-center justify-center px-4 py-2 text-sm font-medium text-red-600 hover:bg-red-50 rounded-lg",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-red-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing out..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(n.xqh,{className:"mr-2"}),"Sign Out"]})})]}):a.jsx("button",{onClick:handleAuthClick,disabled:h,className:"w-full flex items-center justify-center px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-medium rounded-lg shadow-md",children:h?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(n.fzv,{className:"mr-2"}),"Sign In"]})})})]})})})]})};r()}catch(e){r(e)}})},5913:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>l});var r=t(997);t(8702);var a=t(1649);function MyApp({Component:e,pageProps:{session:s,...t}}){return r.jsx(a.SessionProvider,{session:s,children:r.jsx(e,{...t})})}let l=MyApp},8702:()=>{}};
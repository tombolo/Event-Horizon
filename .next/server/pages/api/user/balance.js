"use strict";(()=>{var e={};e.id=112,e.ids=[112],e.modules={145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},4337:(e,r,t)=>{t.r(r),t.d(r,{config:()=>d,default:()=>u,routeModule:()=>c});var a={};t.r(a),t.d(a,{default:()=>handler});var n=t(1802),o=t(7153),s=t(6249);let l=require("next-auth/react");var i=t(7226);async function handler(e,r){if("GET"!==e.method)return r.status(405).json({error:"Method not allowed"});let t=await (0,l.getSession)({req:e});if(!t?.user?.email)return r.status(401).json({error:"Unauthorized"});try{let e=await i.Z,a=e.db(),n=await a.collection("users").findOne({email:t.user.email},{projection:{balance:1}});if(!n)return r.status(404).json({error:"User not found"});return r.status(200).json({balance:n.balance||0})}catch(e){return console.error("Error fetching balance:",e),r.status(500).json({error:"Internal server error"})}}let u=(0,s.l)(a,"default"),d=(0,s.l)(a,"config"),c=new n.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/user/balance",pathname:"/api/user/balance",bundlePath:"",filename:""},userland:a})},7226:(e,r,t)=>{let a;t.d(r,{Z:()=>s});let n=require("mongodb"),o=process.env.MONGODB_URI;if(!process.env.MONGODB_URI)throw Error("Please add your Mongo URI to .env.local");{let e=new n.MongoClient(o,{});a=e.connect()}let s=a}};var r=require("../../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),t=r.X(0,[222],()=>__webpack_exec__(4337));module.exports=t})();
"use strict";(()=>{var e={};e.id=748,e.ids=[748],e.modules={166:e=>{e.exports=require("@next-auth/mongodb-adapter")},3227:e=>{e.exports=require("next-auth")},7449:e=>{e.exports=require("next-auth/providers/credentials")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},7618:e=>{e.exports=import("bcryptjs")},7692:(e,r,a)=>{a.a(e,async(e,s)=>{try{a.r(r),a.d(r,{config:()=>u,default:()=>d,routeModule:()=>c});var t=a(1802),o=a(7153),n=a(6249),i=a(2589),l=e([i]);i=(l.then?(await l)():l)[0];let d=(0,n.l)(i,"default"),u=(0,n.l)(i,"config"),c=new t.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/auth/[...nextauth]",pathname:"/api/auth/[...nextauth]",bundlePath:"",filename:""},userland:i});s()}catch(e){s(e)}})},7226:(e,r,a)=>{let s;a.d(r,{Z:()=>n});let t=require("mongodb"),o=process.env.MONGODB_URI;if(!process.env.MONGODB_URI)throw Error("Please add your Mongo URI to .env.local");{let e=new t.MongoClient(o,{});s=e.connect()}let n=s},2589:(e,r,a)=>{a.a(e,async(e,s)=>{try{a.r(r),a.d(r,{default:()=>p});var t=a(3227),o=a.n(t),n=a(7449),i=a.n(n),l=a(166),d=a(7226),u=a(7618),c=e([u]);u=(c.then?(await c)():c)[0];let p=o()({adapter:(0,l.MongoDBAdapter)(d.Z),providers:[i()({name:"Credentials",credentials:{email:{label:"Email",type:"email"},password:{label:"Password",type:"password"}},async authorize(e){let r=await d.Z,a=r.db();if(!e?.email||!e?.password)return console.error("Missing credentials"),null;let s=await a.collection("users").findOne({email:e.email});if(!s)return console.error("User not found:",e.email),null;if(console.log("User from DB:",s),!s.password)return console.error("Password is missing from user record"),null;let t=await u.default.compare(e.password,s.password);return(console.log("Password match:",t),t)?(console.log("Authorized user:",s.email),{id:s._id.toString(),email:s.email,name:s.name||""}):(console.error("Incorrect password for:",e.email),null)}})],session:{strategy:"jwt"},secret:process.env.NEXTAUTH_SECRET,pages:{signIn:"/auth/signin"},callbacks:{jwt:async({token:e,user:r})=>(r&&(e.id=r.id,e.email=r.email,e.name=r.name),e),session:async({session:e,token:r})=>(r&&e.user&&(e.user.id=r.id,e.user.email=r.email,e.user.name=r.name),e)}});s()}catch(e){s(e)}})}};var r=require("../../../webpack-api-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),a=r.X(0,[222],()=>__webpack_exec__(7692));module.exports=a})();